import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as s,o as c,c as d,a as e,b as a,d as n,e as i}from"./app-jYPNnZCE.js";const t={},r=e("h1",{id:"ass字幕格式",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#ass字幕格式"},[e("span",null,"ass字幕格式")])],-1),p={href:"https://github.com/libass/libass/wiki/ASS-File-Format-Guide",target:"_blank",rel:"noopener noreferrer"},h=i('<p>TODO：<br> 了解ass格式。样式设置。<br> ass解析器。<br> python-vlc 如何播放视频外挂字幕。如何实时修改ass字幕。<br> ffmpeg嵌入软字幕，硬字幕。<br> b站是否支持软字幕。</p><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><ul><li>一个ASS/SSA字幕文件通常被称为&quot;script&quot;</li><li>字幕文件由多个类似ini文件的节(section)组成。每节第一行为<code>[section_title]</code>。前后无空格。两节之间至少有一个空行。</li><li>除了<code>[Fonts]</code>节，其他节的每一行都必须是完整，独立的陈述。单个陈述不允许拆分为多行。</li><li>每个节只能出现一次，并按<code>[Script Info]</code>, <code>[V4++ Style]</code>, <code>[Events]</code>的顺序出现。这三个节是必须有的。<code>[Fonts]</code>节是可选的。</li><li>文件必须为有效的UTF-8格式，并且可以使用UNIX风格或DOS风格的换行符。为了使更多编辑器能够识别，文件开头应添加UTF-8 BOM。</li><li>除非另有指示，否则整数和小数必须使用10进制，并且不得添加任何领先或尾随的零。</li><li>ASS坐标系的原点在左上角。</li></ul><h2 id="script-info节" tabindex="-1"><a class="header-anchor" href="#script-info节"><span>Script Info节</span></a></h2><ul><li>节头为<code>[Script Info]</code></li><li>本节可以设置全局标头(global header)值来影响其他所有内容的行为。</li><li>标头格式<code>header_name: header_value</code>，冒号后的空格不能省略。</li><li>必须有<code>ScriptType</code>标头</li><li>应该至少有<code>ScaledBorderAndShadow</code>、<code>YCbCr Matrix</code>、 <code>PlayResX</code>、<code>PlayResY</code>、<code>LayoutResX</code>、<code>LayoutResY</code>这些标头。</li><li>如果脚本是由程序生成或通过编辑器编写的，则通常会在该<code>[Script Info]</code>部分的第一行中插入对此的注释。格式为<code>; comment content</code>。分号后的空格不能省略</li></ul><h3 id="功能标头" tabindex="-1"><a class="header-anchor" href="#功能标头"><span>功能标头</span></a></h3><ul><li>ScriptType: SSAv4文件设为<code>v4.00</code>，ASS文件设为<code>v4.00+</code>，ASS2文件设为<code>v4.00++</code>。必须匹配以后在样式和事件部分中使用的格式。</li><li>ScaledBorderAndShadow: 设为yes。</li><li>YCbCr Matrix: 有效的值为<code>&lt;range&gt;.&lt;colour space&gt;</code><ul><li>range: 可以是PC(全范围)，或TV(受限范围)</li><li>colour space: 601(BT601), 709(BT709), 240M(SMPTE240M),FCC</li></ul></li><li>LayoutResX and LayoutResY: 设置为相应视频的原生显示尺寸。(应该就是分辨率)</li><li>PlayResX and PlayResY: 创建新文件时和LayoutResX and LayoutResY保持一致。会影响Fontsize的实际大小。</li><li>WrapStyle: 设置全局默认的换行行为。 <ul><li>0: 默认值。在空格或<code>\\n</code>处换行，每行长度尽量相当。</li><li>1: 在空格或<code>\\n</code>处换行，只把溢出的文本放到下一行。</li><li>2: 只会在<code>\\N</code>处换行。(排版应激活此模式<code>\\q</code>，但除非执行纯 Sign&amp;Song 脚本，否则全局启用此模式可能没有多大意义)</li></ul></li></ul><h3 id="信息标头" tabindex="-1"><a class="header-anchor" href="#信息标头"><span>信息标头</span></a></h3><p>以下标头不会影响渲染，但可用于记录有关脚本的元数据： <code>Title</code>, <code>Original Script</code>, <code>Original Translation</code>, <code>Original Editing</code>, <code>Original Timing</code>, <code>Script Updated By</code>, <code>Update Details</code>。值没有特别的格式，只要不包含换行或其他ASCII控制序列即可。</p><h2 id="style节" tabindex="-1"><a class="header-anchor" href="#style节"><span>Style节</span></a></h2><h3 id="v4-ass-风格" tabindex="-1"><a class="header-anchor" href="#v4-ass-风格"><span>v4+(ASS) 风格</span></a></h3><ul><li>节头为<code>[V4+ Styles]</code></li><li>第一行为格式定义，必须是<code>Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding</code></li><li>后续则逐行逐个按Format定义后续会用到的字体样式。 <ul><li>布尔值<code>false</code>必须用<code>0</code>表示，<code>true</code>必须用<code>-1</code>表示。</li><li>颜色值必须使用16进制值，加上<code>&amp;H</code>前缀。颜色和AlphaGo通道的声明顺序为<code>ABGR</code>。<code>&amp;H00</code>为完全不透明，<code>&amp;HFF</code>为透明。对于不接受 alpha 通道的覆盖标签(override tags)，必须仅指定<code>BGR</code>且不指定 alpha。</li><li>所有使用的字体及其变体必须存在并且必须附加到最终版本中。</li></ul></li><li><code>Name</code>: 必须是唯一的非空字符串，不得以空格开头或结尾。稍后用于引用和使用定义的样式。</li><li><code>Fontname</code>: 设置所需字体的系列名称。不得超过 31 个字符，并且字体的系列名称必须在所有平台上匹配。</li><li><code>Spacing</code>： 浮点数。在每个字形之间应用间距。</li><li><code>BorderStyle</code>: 可以<code>1</code>用于扩展字形形状的常规轮廓，也<code>3</code>可以使用矩形框代替。</li><li><code>Alignment</code>：参见<code>\\an</code>允许值。</li><li><code>Encoding</code>: 必须始终设置为<code>1</code>。</li><li><code>Fontsize</code>:浮点数。</li><li><code>PrimaryColour</code>, <code>SecondaryColour</code>, <code>OutlineColour</code>, <code>BackColour</code>: ABGR颜色值。</li><li><code>Bold</code>, <code>Italic</code>, <code>Underline</code>, <code>StrikeOut</code>: 布尔值。</li><li><code>ScaleX</code>, <code>ScaleY</code>: 浮点数。</li><li><code>Outline</code>, <code>Shadow</code>: 浮点数。</li><li><code>Angle</code>: 浮点数。</li><li><code>MarginL</code>, <code>MarginR</code>, <code>MarginV</code>: 整数。</li></ul><h3 id="其他风格" tabindex="-1"><a class="header-anchor" href="#其他风格"><span>其他风格</span></a></h3><p>略</p><h2 id="fonts节" tabindex="-1"><a class="header-anchor" href="#fonts节"><span>Fonts节</span></a></h2><p>此部分是可选的，包含嵌入到字幕文件本身中的字体。如果没有嵌入字体，则必须省略该部分。</p><p>如果可能，您应该将字体附加到 MKV 容器（或类似的多媒体容器），而不是将它们嵌入到字幕文件本身中。</p><h2 id="events节" tabindex="-1"><a class="header-anchor" href="#events节"><span>Events节</span></a></h2><h3 id="格式" tabindex="-1"><a class="header-anchor" href="#格式"><span>格式</span></a></h3><ul><li>节头为<code>[Events]</code></li><li>有两类事件。格式取决于格式版本。 <ul><li><code>Dialogue</code>，将在指定的时间和位置渲染到屏幕上</li><li><code>Comment</code>，不渲染但显示在编辑器中。</li></ul></li><li>v4+格式中，节头下一行必须为<code>Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text</code></li><li>除最后一个<code>Text</code>字段外，任何字段值都不允许包含逗号。</li><li><code>Layer</code>：范围内的整数值<code>[0, 2³¹-1]</code>。低值先渲染。</li><li><code>Start</code>/ <code>End</code>：事件的开始/结束时间；字幕只会在这些时间之间显示； start 与 end 是互斥的。格式为<code>h:mm:ss.dd</code>。</li><li><code>Style</code>：必须与先前定义的名称完全匹配<code>Style</code>。该样式定义将用于整个事件。</li><li><code>Name</code>：一个自由格式的元数据字段，主要用于指示角色正在说/正在思考/...这段对话。不影响渲染。</li><li><code>Margin*</code> : 如果非零，则覆盖样式中的相应值<code>MarginR</code>。<code>MarginV</code></li><li><code>Effect</code>：应用于事件的效果。主要是一些滚动效果。略。</li><li><code>Text</code>：包含将在屏幕上显示的文本和命令。该字段允许包含逗号。</li></ul><h3 id="覆盖标签" tabindex="-1"><a class="header-anchor" href="#覆盖标签"><span>覆盖标签</span></a></h3>',21),u={href:"https://aegisub.org/docs/latest/ass_tags/",target:"_blank",rel:"noopener noreferrer"},m=e("li",null,[a("不要使用"),e("code",null,"\\fe"),a("，使用"),e("code",null,"\\blur"),a("而非"),e("code",null,"\\be")],-1),g=e("li",null,[a("换行使用"),e("code",null,"\\N"),a(", 尽量不要用"),e("code",null,"\\n"),a("。")],-1),v=i(`<h2 id="示例文件" tabindex="-1"><a class="header-anchor" href="#示例文件"><span>示例文件</span></a></h2><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki shiki-themes github-light one-dark-pro" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>\uFEFF[Script Info]</span></span>
<span class="line"><span>ScriptType: v4.00+</span></span>
<span class="line"><span>ScaledBorderAndShadow: yes</span></span>
<span class="line"><span>YCbCr Matrix: None</span></span>
<span class="line"><span>PlayResX: 640</span></span>
<span class="line"><span>PlayResY: 360</span></span>
<span class="line"><span>LayoutResX: 640</span></span>
<span class="line"><span>LayoutResY: 360</span></span>
<span class="line"><span>WrapStyle: 0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[V4+ Styles]</span></span>
<span class="line"><span>Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding</span></span>
<span class="line"><span>Style: Default,DejaVu Sans,65,&amp;H007F67D0,&amp;H00187DC1,&amp;H00000000,&amp;H00D4AA86,-1,0,0,0,100,100,0,0,1,0.4,0,7,10,10,10,1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Events]</span></span>
<span class="line"><span>Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text</span></span>
<span class="line"><span>Comment: 0,0:00:00.00,0:00:06.99,Default,,0,0,0,,Placeholder; replace with proper type later</span></span>
<span class="line"><span>Dialogue: 0,0:00:00.00,0:00:06.99,Default,,0,0,0,,{\\pos(52,72)\\an7\\1c&amp;HB3B3B3&amp;\\p1}m 2 34 l 8 60 112 37 107 24{\\p0}</span></span>
<span class="line"><span>Dialogue: 0,0:00:00.00,0:00:06.99,Default,,0,0,0,,{\\q2\\shad0\\bord2\\fs36\\org(126.31,107.61)\\pos(128.85,116.69)\\fax-0.068131\\fscx207.70\\fscy50.43\\frz4.2185\\frx25.9522\\fry63.2018}Bakery</span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function S(b,f){const l=s("ExternalLinkIcon");return c(),d("div",null,[r,e("p",null,[a("来源： "),e("a",p,[a("https://github.com/libass/libass/wiki/ASS-File-Format-Guide"),n(l)])]),h,e("ul",null,[e("li",null,[a("见"),e("a",u,[a("Aegisub 文档"),n(l)])]),m,g]),v])}const k=o(t,[["render",S],["__file","ass字幕格式.html.vue"]]),x=JSON.parse('{"path":"/blog/ass%E5%AD%97%E5%B9%95%E6%A0%BC%E5%BC%8F.html","title":"ass字幕格式","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2024-04-30T00:00:00.000Z","sticky":false,"star":false,"comment":true,"category":["Note"],"tags":["specification"],"description":"ass字幕格式","head":[["meta",{"property":"og:url","content":"https://1e0nhardt.github.io/blog/ass%E5%AD%97%E5%B9%95%E6%A0%BC%E5%BC%8F.html"}],["meta",{"property":"og:site_name","content":"宁静致远"}],["meta",{"property":"og:title","content":"ass字幕格式"}],["meta",{"property":"og:description","content":"ass字幕格式"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-25T16:58:41.000Z"}],["meta",{"property":"article:author","content":"leonhardt"}],["meta",{"property":"article:tag","content":"specification"}],["meta",{"property":"article:published_time","content":"2024-04-30T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-25T16:58:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ass字幕格式\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-04-30T00:00:00.000Z\\",\\"dateModified\\":\\"2024-05-25T16:58:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"leonhardt\\",\\"url\\":\\"/intro.html\\"}]}"]]},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"Script Info节","slug":"script-info节","link":"#script-info节","children":[{"level":3,"title":"功能标头","slug":"功能标头","link":"#功能标头","children":[]},{"level":3,"title":"信息标头","slug":"信息标头","link":"#信息标头","children":[]}]},{"level":2,"title":"Style节","slug":"style节","link":"#style节","children":[{"level":3,"title":"v4+(ASS) 风格","slug":"v4-ass-风格","link":"#v4-ass-风格","children":[]},{"level":3,"title":"其他风格","slug":"其他风格","link":"#其他风格","children":[]}]},{"level":2,"title":"Fonts节","slug":"fonts节","link":"#fonts节","children":[]},{"level":2,"title":"Events节","slug":"events节","link":"#events节","children":[{"level":3,"title":"格式","slug":"格式","link":"#格式","children":[]},{"level":3,"title":"覆盖标签","slug":"覆盖标签","link":"#覆盖标签","children":[]}]},{"level":2,"title":"示例文件","slug":"示例文件","link":"#示例文件","children":[]}],"git":{"createdTime":1716656321000,"updatedTime":1716656321000,"contributors":[{"name":"1e0nhardt","email":"huwkigane@gmail.com","commits":1}]},"readingTime":{"minutes":5.48,"words":1644},"filePathRelative":"blog/ass字幕格式.md","localizedDate":"2024年4月30日","excerpt":""}');export{k as comp,x as data};
